

при запуске демона, обычно необходимо закрыть все дескрипторы доставшиеся от родителя. 

делается вот так : 

    /* закрываем открытые дискрипторы */
    int x;
    for (x = sysconf(_SC_OPEN_MAX) ; x >= 0; x--)
    {
        close(x);
    }

но в результате такого закрытия сервер на чистых сокетах переставал функционироват 

    /* закрываем открытые дискрипторы */
    int x;
    for (x = sysconf(_SC_OPEN_MAX) - 1 ; x >= 3; x--)
    {
        close(x);
    }

незакрывая максимальный дескриптор, все заработало. Нашли подбную практику, в не классическом примере. 
толи тут переполнение, толи что то еще , Непонятно WTF??? 

